# 타임라인 개요

VoiceScriptPlayer의 **타임라인(Timeline)** 은  
사운드, 비디오, Live2D, UI, 특수 이벤트 등의 재생 구간을 관리하는 핵심 기능입니다.  
모든 리소스는 **트랙(Track)** 단위로 정리되며,  
각 트랙에는 하나 이상의 **노드(Node)** 가 배치됩니다.

---

## 1. 기본 구조

![timeline-overview](../images/timeline-overview.png)

타임라인은 다음과 같은 영역으로 구성됩니다.

| 영역 | 설명 |
|------|------|
| **트랙 목록** | 현재 프로젝트에서 생성된 트랙들이 표시됩니다. |
| **트랙 추가/삭제 버튼** | `+ 새 트랙` 버튼으로 새로운 트랙을 만들 수 있습니다. |
| **시작 트랙 설정** | 재생 기준이 되는 트랙을 지정합니다. (플레이어 실행 시 이 트랙부터 시작) |
| **재생 제어부** | ▶ 재생 / ⏸ 일시정지 / ⏮ 되감기 등의 제어 버튼이 있습니다. |
| **시간 표시줄** | 타임라인 상단의 눈금으로 현재 시간과 구간 길이를 표시합니다. |
| **확대 / 축소** | `Ctrl + 휠 스크롤` 로 확대/축소할 수 있습니다. |

---

## 2. 트랙 관리

- 각 트랙은 **사운드, 비디오, Live2D, UI 이벤트 등**을 포함할 수 있습니다.  
- 트랙 이름을 더블클릭하여 수정할 수 있습니다.  
- 트랙의 순서를 마우스로 드래그해 재배치할 수 있습니다.  
- 트랙을 선택하면 해당 트랙의 **노드들이 타임라인에 표시**됩니다.

> 💡 **팁:**  
> 복잡한 프로젝트일수록 트랙을 리소스 종류별로 구분하면  
> 관리와 디버깅이 훨씬 쉬워집니다.

---

## 3. 노드 (Node)

타임라인에 배치되는 각각의 리소스 단위를 **노드(Node)** 라고 합니다.  
예를 들어, 하나의 음성 클립, 하나의 비디오 구간, 하나의 Live2D 모션 등이 모두 노드입니다.

| 조작 | 설명 |
|------|------|
| **드래그 추가** | 왼쪽 리소스 탭에서 타임라인으로 드래그하여 노드를 추가합니다. |
| **위치 이동** | 노드를 마우스로 이동해 시작 시간을 조정합니다. |
| **길이 조절** | 양 끝을 드래그하여 재생 구간을 늘이거나 줄입니다. |
| **복사/붙여넣기** | `Ctrl + C`, `Ctrl + V` 로 노드를 복제할 수 있습니다. |
| **삭제** | `Delete` 키 또는 우클릭 메뉴로 제거합니다. |

---

## 4. 노드 편집

노드를 우클릭하면 아래와 같은 메뉴가 표시됩니다.

| 메뉴 | 설명 |
|------|------|
| **조건 편집** | 특정 조건을 만족해야 노드가 실행되도록 설정합니다. (예: 변수, 트리거 기반) |
| **시간 편집** | 노드의 시작·종료 시간을 수동 입력으로 정확히 설정합니다. |
| **복사 / 붙여넣기** | 노드를 다른 트랙 또는 다른 시간으로 복제할 수 있습니다. |

> ⚙️ **조건 노드 예시:**  
> - 변수 `Flag_A` 가 활성화된 경우에만 표시  
> - 특정 이벤트(예: 선택지 결과)가 참일 때만 재생  
> - 반복 실행 금지 등

---
## 5. 시간 선택 및 영역 편집

타임라인 상단의 시간 구간을 **드래그하여 영역을 선택**하면  
해당 구간에 대해 다양한 편집 기능을 사용할 수 있습니다.

![timeline-range](../images/timeline-range.png)

### 🔹 영역 선택 방법
- 타임라인 눈금(시간 표시 부분)을 마우스로 **드래그**하면  
  선택 영역이 녹색으로 표시됩니다.
- 선택된 구간은 모든 트랙에 동시에 적용됩니다.  
  (즉, 사운드 / Live2D / 이벤트 등 전체 타임라인에 동일한 범위가 지정됩니다.)

---

### 🔹 우클릭 메뉴

선택 영역 위를 우클릭하면 다음과 같은 메뉴가 표시됩니다:

| 메뉴 | 설명 |
|------|------|
| **시간 추가** | 현재 선택 영역만큼의 시간을 중간에 삽입합니다.<br>모든 노드가 뒤로 밀려납니다. |
| **선택 영역 삭제** | 선택된 시간 구간을 잘라내어 삭제합니다.<br>이후 구간이 앞으로 당겨집니다. |
| **선택 영역만 남기기** | 선택한 시간 영역만 남기고, 나머지 앞뒤 구간을 모두 제거합니다. |

> ⚙️ **예시:**  
> 3분~6분 구간을 드래그 후 “선택 영역만 남기기”를 선택하면,  
> 타임라인 전체가 해당 구간만 남고 자동으로 0초부터 다시 정렬됩니다.

---

### 🔹 활용 팁

- **긴 프로젝트에서 특정 장면만 미리보기**할 때 유용합니다.  
- **불필요한 공백 시간 제거**에도 사용할 수 있습니다.  
- **시간 추가** 기능은 이벤트 간 간격을 확보할 때 빠르게 편리합니다.  

> 💡 **팁:**  
> 선택 영역은 **시간 단위**로 작동하므로  
> 개별 노드와 트랙을 수정하지 않고도 전체 구간을 빠르게 재구성할 수 있습니다.

---

## 6. 시간 제어

타임라인 상단의 **시간 컨트롤러**를 통해 구간을 직접 제어할 수 있습니다.

| 기능 | 설명 |
|------|------|
| **현재 시간** | 재생 위치를 직접 입력하거나 슬라이더로 이동합니다. |
| **총 길이 설정** | 타임라인의 전체 시간을 지정할 수 있습니다. |
| **확대/축소** | `Ctrl + 마우스 휠` 타임라인이 확대/축소됩니다. |
| **재생 / 일시정지 / 반복** | 미리보기 재생 시 실제 플레이어와 동일한 동작으로 동기화됩니다. |

---

## 7. 노드 조건 시스템

VoiceScriptPlayer의 타임라인은 단순한 재생 순서뿐만 아니라  
**논리적 조건(Condition)** 에 따라 노드의 활성 여부를 제어할 수 있습니다.

![node-condition](../images/node-condition.png)

이러한 조건은 **스크립트 탭**에서 선언된 변수나 트리거와 연동됩니다.

---

## 8. 미리보기 및 동기화

- 하단의 ▶ 버튼을 눌러 전체 트랙을 미리보기할 수 있습니다.  
- 미리보기 시, 사운드·Live2D·UI가 동시에 동작하여 **실제 플레이어 동작과 동일한 환경**을 재현합니다.  
- 특정 구간만 테스트하려면 **시작 트랙 설정**으로 기준 트랙을 지정하세요.

> 💡 **팁:**  
> 트랙 구성이 복잡할수록 “조건 편집” 기능을 활용해  
> 상황별로 분기되는 연출을 테스트할 수 있습니다.

---

## 9. 관련 문서

- [사운드 편집](sound.md) — 음성 파일, 자막 생성, 트랙 구성  
- [스크립트](script.md) — 조건 변수, 트리거 정의  
- [특수 이벤트](special-event.md) — 타이밍 기반 연출 및 효과 설정  
- [런타임 도우미](runtime-helper.md) — 디버그 및 재생 테스트
