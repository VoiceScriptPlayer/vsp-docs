## 💡 网络连接错误（NetworkConnectionError） {#network}

### 原因
- 无法连接到河洛服务器，或网络连接不稳定。  
- 您的防火墙或 VPN 可能阻止了对河洛 API 的访问。  
- 服务器地址不正确，或网络暂时中断。

### 解决方案
1. **检查网络连接**
    - 海洛应用程序接口与外部服务器通信，因此需要网络连接。  
2. **检查防火墙/安全程序**
    - 确保域 `https://api.minimax.io`未被阻止。
3. **如果使用 VPN，请禁用并重试**
    - 您的 VPN 或代理服务器可能会阻止验证头。  
4. **禁用并稍后重试**
    - 错误可能是由于服务器维护或临时网络拥塞造成的。  


## 💡 验证失败（HailuoAuthError） {#auth-error}

### 原因
- 缺少 API 密钥或使用了无效值。
- 授权头包含格式不正确的令牌。
- 您获得的 API 密钥已过期或被删除。

### 解决方案
1. **验证 API 密钥输入是否正确**
    - 从您的 Hailuo 控制面板中准确复制已发放的密钥。
    - 授权头应该如下。
     Authorisation: Bearer YOUR_API_KEY`.
2. **检查是否缺少 API 密钥**
    - 确保 VoiceScriptPlayer 首选项中的密钥不是空的。  
3. **重新发放 API 密钥**
    - 您的密钥可能已过期，请从河洛网站获取新密钥。  


## 💡 请求超时（HailuoTimeoutError） {#timeout-error}

### 原因
- 河洛 API 请求超时（通常为 10 秒）。
- 服务器响应缓慢或暂时中断。

### 解决方案
1. **重试**
    - 一段时间后重试通常能解决问题。  
2. **检查网络状况**
    - 不稳定的连接会导致响应延迟。  
3. **缩短输入句子**
    - 长文本可能导致处理时间延长。  


## 💡 请求限制（HailuoRateLimitError） {#ratelimit-error}

### 原因
- 您在短时间内发送了太多请求。
- 已达到河洛 API 的调用频率限制（流量限制）。

### 解决方案
1. **等待 1-2 分钟，然后重试**
    - 服务器将定期解除请求限制。  
2. **调整请求间隔**
    - 请求之间至少间隔 1 秒钟。
3. **检查自动化脚本**
    - 确保没有过多的调用，如循环请求。  


## 💡 超过 TPM（每分钟处理量限制）（HailuoTPMError） {#tpm-error}

### 原因
- 每分钟请求数（Token Per Minute）超过允许上限。
- 为防止请求过多，河洛服务器进行了封堵。

### 解决方案
1. **增加请求间隔**
    - 将请求间隔拉长，或在固定时间间隔发送请求。
2. **检查您的高级计划**
    - 较高的计划有较高的 TPM 限制。
3. **实施自动重试逻辑**
    - 添加 60 秒后重试的逻辑。


## 💡 输入包含非法字符（HailuoIllegalCharacterError）{#illegalchar-error}（非法字符错误

#### 原因。
- 总输入量的 10% 以上包含不可接受的字符（符号、表情符号等）。
- 服务器未正确解释句子编码。

### 解决方案
1. **删除特殊字符**
    - 删除表情符号或控制字符，如 💕, ✨, 🔥 等。
2. **规范文本**
    - 清理空格、制表符、换行符，并编码为 UTF-8。  
3. **分成较短的句子**
    - 如果句子太长，请分段发送。


## 💡 输入格式错误（HailuoInvalidInputFormat） {#invalidinput-error}

#### 原因。
- `text`, `voice_setting`, `audio_setting` 中的必填字段无效。
- JSON 序列化结构与服务器规范不同。  

### 解决方法
1. **验证 JSON 结构**
    - 必须包含`model`、`text`、`voice_setting`和`audio_setting`字段。
2. **验证数据类型**
    - 确保数字为 int/float，字符串为 string。  
3. **更新 VoiceScriptPlayer**
    - 在最新版本中，它将自动以正确的结构发送。  


## 💡 信用不足（HailuoCreditError） {#credit-error}

### 原因
- API 请求所需积分不足。  
- 您的河洛账户余额为 0 元或更少，或者您已超过使用上限。

### 解决方案
1. **登录您的海洛账户，查看余额**
    - 查看余额是否足够。  
2. **充值后再试一次**
    - 通过支付或充值菜单添加更多话费。
3. **检查您的免费等级限制**
    - 如果超出免费使用限制，则需要点数。  


## 💡 无效请求格式（HailuoRequestError） {#request-error}

### 原因
- 缺少必填字段，或数据类型不正确。
- `voice_id`, `text`, `audio_setting`中的一个值无效。
- 服务器无法解释 JSON 结构。

### 解决方法  
1. **检查请求数据**  
    - 请确认文本长度是否过长，以及格式是否有效。  
2. **检查语音参数设置**  
    - 确认 `VoiceId`、`SpeedScale`、`VolumeScale`、`PitchScale` 的值是否在正常范围内。  
3. **验证 JSON 有效性**  
    - 使用 [jsonlint.com](https://jsonlint.com/) 等工具验证记录的请求 JSON 是否有效。  


## 💡 服务器错误（HailuoServerError） {#server-error}

### 原因。
- 河洛服务器出现错误。
- 可能是由于流量临时增加或系统维护。  

### 解决方案
1. **请稍等片刻再试一次**
    - 大多数服务器错误都是暂时的。  
2. **查看服务器状态页面**
    - 查看河洛官方网站或 Discord 频道的维护公告。
3. **如果反复发生，请联系我们**
    - 联系河洛技术支持并附上错误代码和日志。


## 💡 服务器响应解析错误（HailuoParseError） {#json-error}

#### 原因。
- 服务器以意外格式返回 JSON。
- 河洛 API 版本已更改或响应结构已更改。

### 解决方案
1. **检查 Hailuo 引擎版本**
    - 确保与 VoiceScriptPlayer 使用的 API 版本兼容。  
2. **查看响应日志**
    - 检查是否存在 "base_resp "或 "data "结构。
3. **更新软件**
    - 将 VoiceScriptPlayer 更新到最新版本。


## 💡 生成的音频数据为空（HailuoEmptyAudio）{#empty-audio}。

### 原因。
- 您输入的文本太短或无法转换为音频。  
- 海洛无法在内部生成语音。

### 解决方案
1. **检查文本内容**。
    - 用不含空格、特殊字符、表情符号等的句子再试一次。  
2. **换一种语音试试**
    - 只有特定的 VoiceIds 才会出现这种情况。  
3. **重试**
    - 失败可能是由于临时缓存问题。  


## 💡 音频格式错误（HailuoInvalidAudioFormat） {#audio-format}

### 原因
- 返回的音频数据已损坏，或在十六进制转换过程中出现问题。
- 服务器未返回有效的 `audio` 字段。

### 解决方法
1. **验证响应数据**
    - 验证返回的数据是否为十六进制字符串。  
2. **格式检查**
    - 检查设置的 `格式` 值是否为河洛支持的格式（`mp3`、`wav`）。
3. **用短句测试**
    - 长文本输入可能导致缓冲区溢出。  


## 💡 音频处理失败（HailuoAudioProcessingError） {#process-error}

### 原因
- 在 MP3 解码或 WAV 转换过程中发生错误。
- 文件流损坏或传递了无效数据。

### 解决方法
1. **重试**
    - 这可能是暂时的转换错误。  
2. **检查响应数据长度**
    - 检查数据是否太短或为零字节。  
3. **更新 Mp3/Wave 转换库**
    - 确保使用最新版本的 NAudio 和其他相关库。


# hailuoo-unexpected
## 💡 意外响应（HailuoUnexpectedResponse） {#unexpected}

### 原因
- 服务器响应结构未按预期解析。
- `"data.audio"` 字段不存在，或格式已更改。

### 解决方法
1. **检查响应文本**
    - 直接检查日志中记录的 `responseText` 文本。
2. **检查 VoiceScriptPlayer 版本**
    - 旧版本可能不支持最新的 API 结构。  
3. **检查服务器更新**
    - 河洛可能更改了 API 规范。  


# hailuoo-unknown
## 💡 未知错误（HailuoUnknownError） {#unknown-error}

### 原因
- 处理过程中发生意外错误。
- 这可能是一种非例外情况（文件访问、磁盘写入失败等）。  

### 解决方案
1. **检查 VoiceScriptPlayer 和 Hailuo 的版本**。
    - 尽可能更新到最新版本。  
2. **重新启动程序**
    - 问题可能由内存泄漏或缓存损坏引起。  
3. **联系开发人员**
    - 请用日志（`vsp_log.txt`）报告问题。
