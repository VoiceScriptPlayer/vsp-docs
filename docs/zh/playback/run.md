# 运行模式（Playback Mode）

**VoiceScriptPlayer** 的运行模式是与编辑模式分离的 **纯播放环境**。  
在此模式下，时间轴和所有编辑工具都会被禁用，  
仅执行项目的实际行为（音频、Live2D、Stroke、设备控制等）。

---

## 1. 运行模式概述

| 项目 | 说明 |
|------|------|
| **目的** | 播放已完成的项目，或进行设备联动测试。 |
| **与编辑模式的区别** | 编辑功能（选择、移动、属性面板等）被禁用，只能进行纯播放。 |
| **启动方式** | 点击顶部工具栏中的 ▶ 播放按钮，或通过 `vsp://open?file=...` 启动。 |
| **结束方式** | 按下 Esc 键或关闭窗口即可退出。 |

> ⚙️ **提示：**  
> 在运行模式下无法进行键盘输入或手动导航操作，  
> **所有流程都将按照脚本中定义的事件顺序自动执行。**

---

## 2. 播放模式（Play Mode）

进入运行模式时，可通过 **播放模式（Play Mode）** 选项  
选择是否使用设备以及控制方式。

| 选项 | 说明 |
|------|------|
| **无关** | 无论是否连接设备都可自由播放。 |
| **仅手动** | 不启用设备输出，只播放画面与声音。 |
| **推荐使用设备** | 若设备未连接，会显示警告，但用户可以选择继续播放。 |
| **仅设备模式** | 必须连接设备才能开始播放，若无连接则会被阻止运行。 |

---

### ⚠️ 播放模式的限制与警告

| 情况 | 行为 |
|------|------|
| **仅设备模式下未连接设备** | 显示“此脚本需要连接设备才能播放。”并阻止运行。 |
| **推荐使用设备模式下未连接设备** | 显示“建议连接设备，是否继续播放？”用户可选择继续或取消。 |
| **仅设备模式中途设备断开** | 程序会暂停，并显示“请重新连接设备后再继续。” |
| **仅手动模式** | 设备输出完全禁用，Stroke、震动等硬件控制不会执行。 |

> 💡 **小贴士：**  
> 设备模式的限制取决于项目脚本中是否包含“设备依赖型事件”。  
> 例如包含 Stroke 或 TCode 操作时，建议设置为“推荐使用设备”或“仅设备模式”。

---

## 3. 麦克风检测窗口

在运行设置中启用 **“麦克风检测窗口”** 选项后，  
播放开始前会显示专用窗口以确认麦克风是否正常识别。

| 项目 | 说明 |
|------|------|
| **目的** | 确保包含语音识别（STT）或语音交互功能的项目能正确运行。 |
| **检测项** | 已连接的麦克风设备列表、输入灵敏度、语音测试功能。 |
| **执行方式** | 仅当麦克风成功识别后，“确认”按钮才会启用并允许继续播放。 |
| **错误情况** | 若无法识别麦克风，将显示警告窗口，需修复后才能继续。 |

> 💡 **提示：**  
> 如果麦克风检测过程中出现错误，  
> 可参阅 [SpeechRecognition 设置文档](../ai/speechRecognition.md) 获取详细解决方法。

---

## 4. 注意事项

- 在运行模式下，**编辑、保存、资源修改功能均被禁用。**  
- 若在“仅设备模式”下未连接设备，将无法播放。  
- 启用“麦克风检测窗口”后，必须通过测试才能开始播放。  
- 播放过程中若发生错误或设备连接问题，程序会自动暂停，可在修复后继续播放。  

---

## 5. 相关文档

- [资源管理标签页](../editor/resources.md)  
- [运行时助手标签页](../editor/runtime-helper.md)  
- [调试与日志](debug.md)  
- [SpeechRecognition 设置](../ai/speechRecognition.md)
