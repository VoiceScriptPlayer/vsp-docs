## 💡ネットワーク接続エラー（NetworkConnectionError）{#network}。

### 原因
- Hailuoサーバーに接続できないか、インターネット接続が不安定です。  
- ファイアウォールまたはVPNがHailuo APIのアクセスをブロックしている可能性があります。  
- サーバーのアドレスが間違っているか、一時的なネットワーク障害が発生しました。

### 解決方法
1. **インターネット接続の確認**
    - Hailuo APIは外部サーバーと通信するため、ネットワーク接続が必須です。  
2. **ファイアウォール/セキュリティプログラムの確認**
    - `https://api.minimax.io`ドメインがブロックされていないことを確認してください。
3. **VPNを使用している場合は、無効にして再試行する**
    - VPNやProxyが認証ヘッダーをブロックしている可能性があります。  
4. **しばらくしてから再試行してください**
    - サーバーの点検や一時的なネットワーク混雑によるエラーである可能性があります。  


## 💡認証に失敗しました(HailuoAuthError) {#auth-error}。

### 原因
- APIキーが欠落しているか、間違った値を使用しました。
- Authorizationヘッダーに誤った形式のトークンが含まれています。
- 発行されたAPIキーの有効期限が切れているか、削除されました。

### 解決方法
1. **正常なAPIキー入力を確認してください**
    - Hailuoダッシュボードで発行されたキーを正確にコピーしてください。
    - Authorizationヘッダーは次のようになります。
     Authorization: Bearer YOUR_API_KEY `Authorization: Bearer YOUR_API_KEY`.
2. **APIキーが欠落していないか確認します**
    - VoiceScriptPlayer環境設定でキーが空でないことを確認します。  
3. **APIキーの再発行**
    - キーの有効期限が切れている可能性があるため、Hailuoサイトで新しいキーを発行して使用します。  


## 💡 リクエストのタイムアウト(HailuoTimeoutError) {#timeout-error}。

### 原因
- Hailuo APIリクエストが制限時間(通常10秒)を超過しました。
- サーバーの応答が遅いか、一時的に中断されました。

### 解決方法
1. **再試行**
    - 一定時間後に再試行すると、ほとんどの場合解決されます。  
2. **ネットワーク状態の確認**
    - 接続が不安定な場合、応答が遅れることがあります。  
3. **入力文を短くする**
    - 長い文章は処理時間が長くなる場合があります。  


## 💡リクエスト制限（HailuoRateLimitError）{#ratelimit-error}。

### 原因
- 短時間にあまりにも多くのリクエストを送信しました。
- Hailuo APIの呼び出し頻度制限(Flow Restriction)に達しました。

### 解決方法
1. **1～2分待ってから再試行**
    - サーバーが一定周期ごとにリクエスト制限を解除します。  
2. **リクエスト間隔を調整する**
    - リクエストの間に最低1秒以上の遅延を置いてください。
3. **自動化スクリプトのチェック**
    - ループリクエストなどの過剰な呼び出しがないことを確認します。  


## 💡 TPM(毎分処理制限)超過(HailuoTPMError) {#tpm-error}。

### 原因
- 毎分要求量(Token Per Minute)が許容限度を超過しました。
- Hailuoサーバーが過剰なリクエストを防ぐためにブロックしました。

解決方法 ### 解決方法
1. **リクエスト間隔を長くする**
    - リクエストを分散させるか、一定時間間隔で送信してください。
2. **プレミアムプランを確認する**
    - 上位プランでは、TPMの上限が高くなっています。
3. **自動再試行ロジックを実装する**
    - 60秒後に再試行するロジックを追加してください。


## 💡入力に不正な文字を含む (HailuoIllegalCharacterError) {#illegalchar-error} {#illegalchar-error

### 原因
- 全体の入力の10%以上が許可されていない文字(記号、絵文字など)で構成されています。
- サーバーが文のエンコーディングを正しく解釈できませんでした。

### 解決方法
1. **特殊文字を削除する**
    - 💕、✨、🔥などの絵文字や制御文字を削除してください。
2. **テキストの正規化**
    - スペース、タブ、改行文字を整理し、UTF-8でエンコードします。  
3. **短い文章に分割** 短い文章に分割**
    - 文章が長すぎる場合は、部分的に分割して送信してください。


## 💡入力フォーマットエラー(HailuoInvalidInputFormat) {#invalidinput-error}。

### 原因
- `text`, `voice_setting`, `audio_setting` の必須フィールドが無効です。
- JSONシリアル化構造がサーバーの仕様と異なります。  

解決方法 ### 解決方法
1. **JSON構造の検証**
    - `model`, `text`, `voice_setting`, `audio_setting` フィールドが全て含まれている必要があります。
2. **データ型確認** データ型確認**
    - 数字はint/float、文字列はstring形式であることを確認します。  
3. **VoiceScriptPlayerのアップデート**
    - 最新バージョンでは自動的に正しい構造で送信されます。  


## 💡クレジット不足(HailuoCreditError) {#credit-error}。

### 原因
- APIリクエストに必要なクレジットが不足しています。  
- Hailuoアカウントの残高が0ウォン以下か、使用量制限を超過しました。

### 解決方法
1. **Hailuoアカウントにログインし、残高を確認します**
    - 十分なクレジットがあることを確認します。  
2. **チャージして再試行**
    - 支払いまたはチャージメニューからクレジットを追加してください。
3. **無料ティア制限を確認する**
    - 無料使用制限を超えると、クレジットが必要になります。  


## 💡間違ったリクエスト形式（HailuoRequestError） {#request-error}。

### 原因
- 必須フィールドが欠落しているか、データ型が正しくありません。
- `voice_id`, `text`, `audio_setting` のいずれかの値が間違っています。
- サーバーがJSON構造を解釈できませんでした。

### 解決方法
1. **リクエストデータの確認**
    - テキストの長さが長すぎないか、フォーマットが正しいか確認してください。
2. **音声設定値の確認**
    - `VoiceId`, `SpeedScale`, `VolumeScale`, `PitchScale` の値が正常な範囲であることを確認してください。  
3. **JSON検証**
    - ログに記録されたリクエストJSONを[jsonlint.com](https://jsonlint.com/)などで検証してください。


## 💡サーバーエラー(HailuoServerError) {#server-error}。

### 原因
- Hailuoサーバー内部でエラーが発生しました。
- 一時的なトラフィックの増加やシステム点検中である可能性があります。  

### 解決方法
1. **しばらくしてから再試行してください**
    - ほとんどのサーバーエラーは一時的なものです。  
2. **サーバーのステータスページをご確認ください**
    - Hailuo公式サイトまたはDiscordチャンネルでメンテナンスのお知らせをご確認ください。
3. **繰り返し発生する場合はお問い合わせください**
    - エラーコードとログを添付してHailuoサポートにお問い合わせください。


## 💡サーバー応答解釈エラー(HailuoParseError) {#json-error}。

### 原因
- サーバーが予期しない形式のJSONを返しました。
- Hailuo APIのバージョンが変更されたか、応答構造が変わった。

### 解決方法
1. **Hailuoエンジンのバージョン確認**
    - VoiceScriptPlayerが使用するAPIバージョンと互換性があることを確認します。  
2. **レスポンスログの確認**
    - "base_resp"または"data"構造があるか確認してください。
3. **ソフトウェアのアップデート**
    - VoiceScriptPlayerを最新バージョンにアップデートしてください。


## 💡生成されたオーディオデータが空である (HailuoEmptyAudio) {#empty-audio} {#empty-audio}

### 原因
- 入力したテキストが短すぎたり、音声に変換できない内容です。  
- Hailuoが内部的に音声を生成できませんでした。

### 解決方法
1. **テキストの内容を確認する**
    - 空白、特殊文字、絵文字などを含まない文章で再試行します。  
2. **別の音声で再試行**
    - 特定のVoiceIdでのみ発生する可能性があります。  
3. **再試行**
    - 一時的なキャッシュの問題による失敗の可能性があります。  


## 💡 オーディオフォーマットエラー(HailuoInvalidAudioFormat) {#audio-format}。

### 原因
- 返されたオーディオデータが破損しているか、Hex変換中に問題が発生しました。
- サーバーが正しい `audio` フィールドを返さなかった。

### 解決方法
1. **応答データの検証**
    - 返されたデータがHex文字列であることを確認します。  
2. **フォーマットの確認**
    - 設定された`Format`値がHailuoがサポートする形式(`mp3`, `wav`)であることを確認します。
3. **短い文章でテスト**短い文章でテスト**
    - 長いテキストを入力すると、バッファオーバーが発生する可能性があります。  


## 💡オーディオ処理失敗 (HailuoAudioProcessingError) {#process-error} {#process-error

### 原因
- MP3デコードまたはWAV変換中にエラーが発生しました。
- ファイルストリームが破損しているか、間違ったデータが渡されました。

### 解決方法
1. **再試行**
    - 一時的な変換エラーである可能性があります。  
2. **応答データの長さを確認します**
    - データが過度に短いか、0バイトかどうかを確認します。  
3. **Mp3/Wave変換ライブラリを更新してください**
    - NAudioなどの関連ライブラリのバージョンを最新の状態に保ちます。


# hailuo-unexpected
## 💡予期せぬレスポンス(HailuoUnexpectedResponse) {#unexpected}。

### 原因
- サーバーのレスポンス構造が予想と違い、パースされませんでした。
- `"data.audio"`フィールドが存在しないか、形式が変更されました。

### 解決方法
1. **レスポンステキストを確認する**
    - ログに記録された `responseText` を直接確認してください。
2. **VoiceScriptPlayerのバージョンを確認してください**
    - 古いバージョンでは最新のAPI構造をサポートしていない可能性があります。  
3. **サーバーのアップデート確認**
    - Hailuo側でAPI仕様が変更された可能性があります。  


# hailuo-unknown
## 💡 不明なエラー(HailuoUnknownError) {#unknown-error}。

### 原因
- 処理中に予期せぬエラーが発生しました。
- 例外処理されていない状況(ファイルアクセス、ディスク書き込み失敗など)である可能性があります。  

### 解決方法
1. **VoiceScriptPlayerとHailuoのバージョン確認**
    - 可能な限り最新のバージョンにアップデートします。  
2. **プログラムを再起動します**
    - メモリリークやキャッシュのねじれによる問題である可能性があります。  
3. **開発者に連絡する**
    - ログ(`vsp_log.txt`)と一緒に問題を報告してください。
